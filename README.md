# ws_b0t
v.0.0.1
#  Основной функционал
Основной функционал реализован кнопками. При первом старте будет предложено выбрать из нескольких вариантов агрегаторов оъявлений, далее функционал кнопок одинаков для всех вариантов агрегаторов.
# Непосредственно кнопки
- Кнопка "Создать ссылку...", отвечает за создание и валидацию ссылки, и дальйнейшего парсинга по этой ссылке. При недопустимом формате ссылке, сообщением в ответ присылается подробная инструкция. Если ссылка валидна - проходит парсинг и новые карточки товаров с выбранного сайта приходят, с задержкой (регулируемой), в ответ. Отменяется действие этой кнопки нажатием на кнопку "Вернуться к агрегаторам";
- Кнопка "Мои ссылки...", отвечает за вывод валидных ссылок из БД (на данный момент используется  Sqlite);
- Кнопка "Удалить ссылки..." отвечает за удаление ссылок из БД (пока реализовано удаление всех ссылок разом);
- Кнопка "Вернуться к агрегаторам", отвечает за возврат на главную клавиатуру с выбором агрегатора.
# Кнопка "Вернуться к агрегаторам"
- Есть глобальный флаг 'run' равный изначально True; 
<img width="441" alt="Screenshot 2021-11-23 at 08 38 13" src="https://user-images.githubusercontent.com/89384156/143040278-1d38eb01-9483-49ed-a6ea-43d04ce0e428.png">
- Прии нажатии кнопки "Вернуться к агрегаторам", флаг переходит в значение False. Но дабы сохранить возможность функционирования кнопки "Создать ссылку...", при наажатие на на одну из кнопок на клавиатуре с агрегаторами - флаг снова встает в состояние True, таким образом сохраняется функционал кнопок.
- Обращаю внимание, что после выхода, по нажатию кнопки "Вернуться к агрегаторам", следует подождать пока состояние FSM закончиться. Этот таймер показан на скриншоте снизу;
<img width="653" alt="Screenshot 2021-11-23 at 08 38 04" src="https://user-images.githubusercontent.com/89384156/143041329-757d6ca5-afe8-4ed6-87ff-24ce34a0f3f6.png">
(Т.е после нажатия кнопки "Вернуться к агрегаторам" надо подождать 5 секунд (для теста, в консоли текст об окончание обернут в prin())

- Таймер можно менять, в зависимости от того, как часто вы хотите, чтобы вам приходили карточки товаров

# Эпилог
Код на ранней стадии, постоянно дорабатывается и обновляется.
